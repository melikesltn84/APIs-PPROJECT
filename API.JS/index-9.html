<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // async function getCountryFlag(country) {
      //   try {
      //     const response = await fetch(
      //       `https://restcountries.com/v3.1/name/${country}`
      //     );

      //     if (!response.ok) {
      //       throw new Error("Ülke bulunamadı!!!");
      //     }

      //     const data = await response.json();
      //     const flagURL = data[0].flags.png;
      //     const countryName = data[0].name.common;
      //     return { flagURL, countryName };
      //   } catch (error) {
      //     console.log(error.message);
      //   }
      // }

      // async function main(country) {
      //   try {
      //     const countryFlag = await getCountryFlag(country);
      //     const imgElement = document.createElement("img");
      //     imgElement.src = countryFlag.flagURL;
      //     imgElement.alt = `${countryFlag.countryName} bayrağı`;
      //     document.body.appendChild(imgElement);
      //     console.log(`Bayrak, ${countryFlag.countryName} ülkesine aittir`);
      //   } catch (err) {
      //     console.log("Hata:", err.message);
      //   }
      // }

      // main("Türkiye");

      // function getCountryFlag(country) {
      //   return new Promise(async (resolve, reject) => {
      //     try {
      //       const response = await fetch(
      //         `https://restcountries.com/v3.1/name/${country}`
      //       );

      //       if (!response.ok) {
      //         throw new Error("Ülke bulunamadı!!!");
      //       }

      //       const data = await response.json();
      //       const flagURL = data[0].flags.png;
      //       const countryName = data[0].name.common;
      //       resolve({ flagURL, countryName });
      //     } catch (err) {
      //       reject(err);
      //     }
      //   });
      // }

      // async function main(country) {
      //   try {
      //     const countryFlag = await getCountryFlag(country);
      //     const imgElement = document.createElement("img");
      //     imgElement.src = countryFlag.flagURL;
      //     imgElement.alt = `${countryFlag.countryName} bayrağı`;
      //     document.body.appendChild(imgElement);
      //      console.log(`Bayrak ${countryFlag.countryName} ülkesine ait`);
      //   } catch (err) {
      //     console.log(err.message);
      //   }
      // }

      // main("Turkey");

      async function getCountryFlag(country) {
        const response = await fetch(
          `https://restcountries.com/v3.1/name/${country}`
        );
        if (!response.ok) {
          throw new Error("ülke bulunamadı!");
        }

        const data = await response.json();
        const flagURL = data[0].flags.png;
        console.log(flagURL);
        const countryName = data[0].name.common;
        return { flagURL, countryName };
      }

      async function main(country) {
        try {
          const countryFlag = await getCountryFlag(country);
          const imgElement = document.createElement("img");
          imgElement.src = countryFlag.flagURL;
          imgElement.alt = `${countryFlag.countryName} bayrağıdır`;
          document.body.appendChild(imgElement);
          const divElement = document.createElement("div");
          document.body.appendChild(divElement);

          const h2Element = document.createElement("h2");
          h2Element.innerText = `${countryFlag.countryName}`;

          divElement.appendChild(h2Element);
        } catch (error) {
          console.log(error.message);
        }
      }

      main("germany");
    </script>
  </body>
</html>
